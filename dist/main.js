/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={676:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function i(e,t,i){var r,s=new Promise((function(s,o){n(r=e[t].apply(e,i)).then(s,o)}));return s.request=r,s}function r(e,t,n){var r=i(e,t,n);return r.then((function(e){if(e)return new l(e,r.request)}))}function s(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function o(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return this[t][i].apply(this[t],arguments)})}))}function c(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function h(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function u(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function p(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function f(e){this._db=e}s(h,"_index",["name","keyPath","multiEntry","unique"]),o(h,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(h,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(l,"_cursor",["direction","key","primaryKey","value"]),o(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,i=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,i),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),u.prototype.createIndex=function(){return new h(this._store.createIndex.apply(this._store,arguments))},u.prototype.index=function(){return new h(this._store.index.apply(this._store,arguments))},s(u,"_store",["name","keyPath","indexNames","autoIncrement"]),o(u,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(u,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(u,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new u(this._tx.objectStore.apply(this._tx,arguments))},s(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new u(this._db.createObjectStore.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},s(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[u,h].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),i=n[n.length-1],r=this._store||this._index,s=r[e].apply(r,n.slice(0,-1));s.onsuccess=function(){i(s.result)}})}))})),[h,u].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,i=[];return new Promise((function(r){n.iterateCursor(e,(function(e){e?(i.push(e.value),void 0===t||i.length!=t?e.continue():r(i)):r(i)}))}))})})),e.openDb=function(e,t,n){var r=i(indexedDB,"open",[e,t]),s=r.request;return s&&(s.onupgradeneeded=function(e){n&&n(new p(s.result,e.oldVersion,s.transaction))}),r.then((function(e){return new f(e)}))},e.deleteDb=function(e){return i(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";let e=[];function t(e,t,n,i){this.title=e,this.author=t,this.pages=n,this.read=i}const i=document.getElementById("title"),r=document.getElementById("author"),s=document.getElementById("pages"),o=document.getElementsByName("readOrNot"),a=document.querySelector("#submit"),c=document.querySelector("#totalBooks"),h=document.querySelector("#totalRead"),l=document.querySelector("#totalUnread"),u=document.querySelector(".noBooks"),d=document.querySelector(".content");let p,f;function g(){document.getElementById("form").style.display="flex"}function m(){a.classList.remove("edit"),a.textContent="Add Book";const e=document.getElementById("form");i.value="",s.value="",r.value="",e.style.display="none"}function v(){let t=0,n=0;for(let i=0;i<e.length;i++)"Read"===e[i].read?t++:n++;c.textContent=`Total Books: ${e.length}`,h.textContent=`Read: ${t}`,l.textContent=`Unread: ${n}`}function y(){v(),d.textContent="";let t=0;e.forEach((e=>{const n=document.createElement("div");n.classList.add("card"),n.dataset.cardNumber=`${t}`,d.appendChild(n);const i=document.createElement("div");i.classList.add("info"),n.appendChild(i);let r=[`Title: ${e.title}`,`Author: ${e.author}`,`Pages: ${e.pages}`];for(let e=0;e<r.length;e++){const t=document.createElement("div");t.textContent=r[e],i.appendChild(t)}const s=document.createElement("div");s.classList.add("flexButton"),s.dataset.index=`${t}`,i.appendChild(s);const o=document.createElement("button");o.classList.add("button"),o.setAttribute("id","readButton"),o.textContent="Read"===e.read?"Read":"Not Yet Read",s.appendChild(o);const a=document.createElement("div");a.classList.add("editDelete"),s.appendChild(a),document.createElement("button");let c=["edit","delete"];for(let e=0;e<c.length;e++){const t=document.createElement("button");t.textContent=c[e],t.classList.add("button",c[e]),a.appendChild(t)}t++})),""===d.innerHTML?u.style.display="block":u.style.display="none",document.querySelectorAll("#readButton").forEach((e=>{e.addEventListener("click",b)})),document.querySelectorAll(".delete").forEach((e=>{e.addEventListener("click",w)})),document.querySelectorAll(".edit").forEach((e=>{e.addEventListener("click",_)}))}function b(t){f=t.target.parentNode.dataset.index,console.log(f),"Not Yet Read"===e[f].read?e[f].read="Read":e[f].read="Not Yet Read",document.querySelector(`[data-index = "${f}"]`).firstChild.textContent=e[f].read,v()}function w(t){f=t.target.parentNode.parentNode.dataset.index,e.splice(f,1),y()}function _(t){f=t.target.parentNode.parentNode.dataset.index,i.value=e[f].title,s.value=e[f].pages,r.value=e[f].author;for(let t=0;t<o.length;t++)e[f].read===o[t].value&&(o[t].checked=!0);const n=document.querySelector("#submit");n.classList.add("edit"),n.textContent="Edit",g()}const I={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,h=r>>2,l=(3&r)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(u=64)),i.push(n[h],n[l],n[u],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t}(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==s||null==o||null==a)throw Error();const c=r<<2|s>>4;if(i.push(c),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function E(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class k extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,k.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.create)}}class S{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(R,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new k(i,o,n)}}const R=/\{\$([^}]+)}/g;function C(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(A(n)&&A(s)){if(!C(n,s))return!1}else if(n!==s)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function A(e){return null!==e&&"object"==typeof e}function O(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function P(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function N(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class D{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=L),void 0===i.error&&(i.error=L),void 0===i.complete&&(i.complete=L);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function L(){}function M(e){return e&&e._delegate?e._delegate:e}class x{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const U="[DEFAULT]";class j{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new T;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:U})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===U?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:U:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class F{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new j(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const B=[];var H,$;($=H||(H={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT";const V={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},K=H.INFO,q={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},z=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=q[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class W{constructor(e){this.name=e,this._logLevel=K,this._logHandler=z,this._userLogHandler=null,B.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in H))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?V[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...e),this._logHandler(this,H.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...e),this._logHandler(this,H.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,H.INFO,...e),this._logHandler(this,H.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,H.WARN,...e),this._logHandler(this,H.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...e),this._logHandler(this,H.ERROR,...e)}}class G{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const J="@firebase/app",X="0.7.15",Y=new W("@firebase/app"),Q={[J]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Z=new Map,ee=new Map;function te(e,t){try{e.container.addComponent(t)}catch(n){Y.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ne(e){const t=e.name;if(ee.has(t))return Y.debug(`There were multiple attempts to register component ${t}.`),!1;ee.set(t,e);for(const t of Z.values())te(t,e);return!0}function ie(e,t){return e.container.getProvider(t)}const re=new S("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class se{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new x("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw re.create("app-deleted",{appName:this._name})}}const oe="9.6.5";function ae(e,t,n){var i;let r=null!==(i=Q[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Y.warn(e.join(" "))}ne(new x(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}function ce(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}ne(new x("platform-logger",(e=>new G(e)),"PRIVATE")),ae(J,X,""),ae(J,X,"esm2017"),ae("fire-js",""),ae("firebase","9.6.5","app"),Object.create,Object.create;const he=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},le=new S("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ue=new W("@firebase/auth");function de(e,...t){ue.logLevel<=H.ERROR&&ue.error(`Auth (9.6.5): ${e}`,...t)}function pe(e,...t){throw me(e,...t)}function fe(e,...t){return me(e,...t)}function ge(e,t,n){const i=Object.assign(Object.assign({},he()),{[t]:n});return new S("auth","Firebase",i).create(t,{appName:e.name})}function me(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return le.create(e,...t)}function ve(e,t,...n){if(!e)throw me(t,...n)}function ye(e){const t="INTERNAL ASSERTION FAILED: "+e;throw de(t),new Error(t)}function be(e,t){e||ye(t)}const we=new Map;function _e(e){be(e instanceof Function,"Expected a class definition");let t=we.get(e);return t?(be(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,we.set(e,t),t)}function Ie(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Te(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Ee(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Te()||"https:"===Te()||function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class ke{constructor(e,t){this.shortDelay=e,this.longDelay=t,be(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Ee()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Se(e,t){be(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Re{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ae=new ke(3e4,6e4);function Oe(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Pe(e,t,n,i,r={}){return Ne(e,r,(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=O(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Re.fetch()(Le(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))}))}async function Ne(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Ce),t);try{const t=new Me(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw xe(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw xe(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw xe(e,"email-already-in-use",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw ge(e,a,o);pe(e,a)}}catch(t){if(t instanceof k)throw t;pe(e,"network-request-failed")}}async function De(e,t,n,i,r={}){const s=await Pe(e,t,n,i,r);return"mfaPendingCredential"in s&&pe(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Le(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?Se(e.config,r):`${e.config.apiScheme}://${r}`}class Me{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(fe(this.auth,"network-request-failed"))),Ae.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function xe(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=fe(e,t,i);return r.customData._tokenResponse=n,r}function Ue(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function je(e){return 1e3*Number(e)}function Fe(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return de("JWT malformed, contained fewer than 3 sections"),null;try{const e=function(e){try{return I.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n);return e?JSON.parse(e):(de("Failed to decode base64 JWT payload"),null)}catch(e){return de("Caught error parsing JWT payload as JSON",e),null}}async function Be(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof k&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class He{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class $e{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ue(this.lastLoginAt),this.creationTime=Ue(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ve(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Be(e,async function(e,t){return Pe(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));ve(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=ce(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=e.providerData,h=o,[...c.filter((e=>!h.some((t=>t.providerId===e.providerId)))),...h]);var c,h;const l=e.isAnonymous,u=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!l&&u,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new $e(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,p)}class Ke{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(void 0!==e.idToken,"internal-error"),ve(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Fe(e);return ve(t,"internal-error"),ve(void 0!==t.exp,"internal-error"),ve(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return ve(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await Ne(e,{},(async()=>{const n=O({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=Le(e,i,"/v1/token",`key=${r}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Re.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new Ke;return n&&(ve("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(ve("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(ve("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ke,this.toJSON())}_performRefresh(){return ye("not implemented")}}function qe(e,t){ve("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ze{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=ce(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new He(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.metadata=new $e(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Be(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=M(e),i=await n.getIdToken(t),r=Fe(i);ve(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ue(je(r.auth_time)),issuedAtTime:Ue(je(r.iat)),expirationTime:Ue(je(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=M(e);await Ve(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ze(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ve(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Be(this,async function(e,t){return Pe(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,c,h;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(h=t.lastLoginAt)&&void 0!==h?h:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:I}=t;ve(y&&I,e,"internal-error");const T=Ke.fromJSON(this.name,I);ve("string"==typeof y,e,"internal-error"),qe(l,e.name),qe(u,e.name),ve("boolean"==typeof b,e,"internal-error"),ve("boolean"==typeof w,e,"internal-error"),qe(d,e.name),qe(p,e.name),qe(f,e.name),qe(g,e.name),qe(m,e.name),qe(v,e.name);const E=new ze({uid:y,auth:e,email:u,emailVerified:b,displayName:l,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:T,createdAt:m,lastLoginAt:v});return _&&Array.isArray(_)&&(E.providerData=_.map((e=>Object.assign({},e)))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t,n=!1){const i=new Ke;i.updateFromServerResponse(t);const r=new ze({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Ve(r),r}}class We{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}We.type="NONE";const Ge=We;function Je(e,t,n){return`firebase:${e}:${t}:${n}`}class Xe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Je(this.userKey,i.apiKey,r),this.fullPersistenceKey=Je("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ze._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Xe(_e(Ge),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||_e(Ge);const s=Je(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const i=ze._fromJSON(e,t);n!==r&&(o=i),r=n;break}}catch(e){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(e){}}))),new Xe(r,e,n)):new Xe(r,e,n)}}function Ye(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(tt(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Qe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(it(t))return"Blackberry";if(rt(t))return"Webos";if(Ze(t))return"Safari";if((t.includes("chrome/")||et(t))&&!t.includes("edge/"))return"Chrome";if(nt(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Qe(e=E()){return/firefox\//i.test(e)}function Ze(e=E()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function et(e=E()){return/crios\//i.test(e)}function tt(e=E()){return/iemobile/i.test(e)}function nt(e=E()){return/android/i.test(e)}function it(e=E()){return/blackberry/i.test(e)}function rt(e=E()){return/webos/i.test(e)}function st(e=E()){return/iphone|ipad|ipod/i.test(e)}function ot(e=E()){return st(e)||nt(e)||rt(e)||it(e)||/windows phone/i.test(e)||tt(e)}function at(e,t=[]){let n;switch(e){case"Browser":n=Ye(E());break;case"Worker":n=`${Ye(E())}-${e}`;break;default:n=e}return`${n}/JsCore/9.6.5/${t.length?t.join(","):"FirebaseCore-web"}`}class ct{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lt(this),this.idTokenSubscription=new lt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=le,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_e(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Xe.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);i&&i!==r||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ve(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?M(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(_e(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new S("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_e(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=await Xe.create(this,[_e(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return ve(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=at(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function ht(e){return M(e)}class lt{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new D(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class ut{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ye("not implemented")}_getIdTokenResponse(e){return ye("not implemented")}_linkToIdToken(e,t){return ye("not implemented")}_getReauthenticationResolver(e){return ye("not implemented")}}class dt extends ut{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new dt(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new dt(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return De(e,"POST","/v1/accounts:signInWithPassword",Oe(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return De(e,"POST","/v1/accounts:signInWithEmailLink",Oe(e,t))}(e,{email:this._email,oobCode:this._password});default:pe(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return Pe(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return De(e,"POST","/v1/accounts:signInWithEmailLink",Oe(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:pe(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function pt(e,t){return De(e,"POST","/v1/accounts:signInWithIdp",Oe(e,t))}class ft extends ut{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ft(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pe("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=ce(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new ft(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return pt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pt(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=O(t)}return e}}const gt={USER_NOT_FOUND:"user-not-found"};class mt extends ut{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new mt({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new mt({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return De(e,"POST","/v1/accounts:signInWithPhoneNumber",Oe(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await De(e,"POST","/v1/accounts:signInWithPhoneNumber",Oe(e,t));if(n.temporaryProof)throw xe(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return De(e,"POST","/v1/accounts:signInWithPhoneNumber",Oe(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),gt)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new mt({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class vt{constructor(e){var t,n,i,r,s,o;const a=P(N(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,h=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);ve(c&&h&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=h,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=P(N(e)).link,n=t?P(N(t)).deep_link_id:null,i=P(N(e)).deep_link_id;return(i?P(N(i)).link:null)||i||n||t||e}(e);try{return new vt(t)}catch(e){return null}}}class yt{constructor(){this.providerId=yt.PROVIDER_ID}static credential(e,t){return dt._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=vt.parseLink(t);return ve(n,"argument-error"),dt._fromEmailAndCode(e,n.code,n.tenantId)}}yt.PROVIDER_ID="password",yt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",yt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class wt extends bt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _t extends wt{constructor(){super("facebook.com")}static credential(e){return ft._fromParams({providerId:_t.PROVIDER_ID,signInMethod:_t.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _t.credentialFromTaggedObject(e)}static credentialFromError(e){return _t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return _t.credential(e.oauthAccessToken)}catch(e){return null}}}_t.FACEBOOK_SIGN_IN_METHOD="facebook.com",_t.PROVIDER_ID="facebook.com";class It extends wt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ft._fromParams({providerId:It.PROVIDER_ID,signInMethod:It.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return It.credentialFromTaggedObject(e)}static credentialFromError(e){return It.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return It.credential(t,n)}catch(e){return null}}}It.GOOGLE_SIGN_IN_METHOD="google.com",It.PROVIDER_ID="google.com";class Tt extends wt{constructor(){super("github.com")}static credential(e){return ft._fromParams({providerId:Tt.PROVIDER_ID,signInMethod:Tt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tt.credentialFromTaggedObject(e)}static credentialFromError(e){return Tt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Tt.credential(e.oauthAccessToken)}catch(e){return null}}}Tt.GITHUB_SIGN_IN_METHOD="github.com",Tt.PROVIDER_ID="github.com";class Et extends wt{constructor(){super("twitter.com")}static credential(e,t){return ft._fromParams({providerId:Et.PROVIDER_ID,signInMethod:Et.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Et.credentialFromTaggedObject(e)}static credentialFromError(e){return Et.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Et.credential(t,n)}catch(e){return null}}}Et.TWITTER_SIGN_IN_METHOD="twitter.com",Et.PROVIDER_ID="twitter.com";class kt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await ze._fromIdTokenResponse(e,n,i),s=St(n);return new kt({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=St(n);return new kt({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function St(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Rt extends k{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Rt.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Rt(e,t,n,i)}}function Ct(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Rt._fromErrorAndOperation(e,n,t,i);throw n}))}new WeakMap;const At="__sak";class Ot{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(At,"1"),this.storage.removeItem(At),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Pt extends Ot{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=E();return Ze(e)||st(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ot(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);!function(){const e=E();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||r===e.newValue||e.newValue===e.oldValue?i():setTimeout(i,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Pt.type="LOCAL";const Nt=Pt;class Dt extends Ot{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Dt.type="SESSION";const Lt=Dt;class Mt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Mt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function xt(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Mt.receivers=[];class Ut{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=xt("",20);i.port1.start();const h=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(h),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(h),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function jt(){return window}function Ft(){return void 0!==jt().WorkerGlobalScope&&"function"==typeof jt().importScripts}const Bt="firebaseLocalStorageDb",Ht="firebaseLocalStorage",$t="fbase_key";class Vt{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Kt(e,t){return e.transaction([Ht],t?"readwrite":"readonly").objectStore(Ht)}function qt(){const e=indexedDB.open(Bt,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ht,{keyPath:$t})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ht)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Bt);return new Vt(e).toPromise()}(),t(await qt()))}))}))}async function zt(e,t,n){const i=Kt(e,!0).put({[$t]:t,value:n});return new Vt(i).toPromise()}function Wt(e,t){const n=Kt(e,!0).delete(t);return new Vt(n).toPromise()}class Gt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await qt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ft()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mt._getInstance(Ft()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ut(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qt();return await zt(e,At,"1"),await Wt(e,At),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>zt(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Kt(e,!1).get(t),i=await new Vt(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Wt(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Kt(e,!1).getAll();return new Vt(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Gt.type="LOCAL";const Jt=Gt;function Xt(e){return`__${e}${Math.floor(1e6*Math.random())}`}Xt("rcb"),new ke(3e4,6e4);class Yt{constructor(e){this.providerId=Yt.PROVIDER_ID,this.auth=ht(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var i;const r=await n.verify();try{let s;if(ve("string"==typeof r,e,"argument-error"),ve("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ve("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Pe(e,"POST","/v2/accounts/mfaEnrollment:start",Oe(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{ve("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;ve(n,e,"missing-multi-factor-info");const o=await function(e,t){return Pe(e,"POST","/v2/accounts/mfaSignIn:start",Oe(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Pe(e,"POST","/v1/accounts:sendVerificationCode",Oe(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}(this.auth,e,M(t))}static credential(e,t){return mt._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Yt.credentialFromTaggedObject(t)}static credentialFromError(e){return Yt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?mt._fromTokenResponse(t,n):null}}function Qt(e,t){return t?_e(t):(ve(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Yt.PROVIDER_ID="phone",Yt.PHONE_SIGN_IN_METHOD="phone";class Zt extends ut{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function en(e){return async function(e,t,n=!1){const i="signIn",r=await Ct(e,i,t),s=await kt._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}(e.auth,new Zt(e),e.bypassAuthState)}function tn(e){const{auth:t,user:n}=e;return ve(n,t,"internal-error"),async function(e,t,n=!1){const{auth:i}=e,r="reauthenticate";try{const s=await Be(e,Ct(i,r,t,e),n);ve(s.idToken,i,"internal-error");const o=Fe(s.idToken);ve(o,i,"internal-error");const{sub:a}=o;return ve(e.uid===a,i,"user-mismatch"),kt._forOperation(e,r,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&pe(i,"user-mismatch"),e}}(n,new Zt(e),e.bypassAuthState)}async function nn(e){const{auth:t,user:n}=e;return ve(n,t,"internal-error"),async function(e,t,n=!1){const i=await Be(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return kt._forOperation(e,"link",i)}(n,new Zt(e),e.bypassAuthState)}class rn{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return en;case"linkViaPopup":case"linkViaRedirect":return nn;case"reauthViaPopup":case"reauthViaRedirect":return tn;default:pe(this.auth,"internal-error")}}resolve(e){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sn=new ke(2e3,1e4);class on extends rn{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,on.currentPopupAction&&on.currentPopupAction.cancel(),on.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){be(1===this.filter.length,"Popup operations only handle one event");const e=xt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(fe(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,on.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(fe(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,sn.get())};e()}}on.currentPopupAction=null;const an=new Map;class cn extends rn{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=an.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Je("pendingRedirect",e.config.apiKey,e.name)}(t),i=function(e){return _e(e._redirectPersistence)}(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}an.set(this.auth._key(),e)}return this.bypassAuthState||an.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function hn(e,t,n=!1){const i=ht(e),r=Qt(i,t),s=new cn(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class ln{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!dn(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(fe(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(un(e))}saveEventToCache(e){this.cachedEventUids.add(un(e)),this.lastProcessedEventTime=Date.now()}}function un(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function dn({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const pn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fn=/^https?/;function gn(e){const t=Ie(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!fn.test(n))return!1;if(pn.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const mn=new ke(3e4,6e4);function vn(){const e=jt().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let yn=null;function bn(e){return yn=yn||function(e){return new Promise(((t,n)=>{var i,r,s,o;function a(){vn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vn(),n(fe(e,"network-request-failed"))},timeout:mn.get()})}if(null===(r=null===(i=jt().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=jt().gapi)||void 0===s?void 0:s.load)){const t=Xt("iframefcb");return jt()[t]=()=>{gapi.load?a():n(fe(e,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${t}`,new Promise(((e,t)=>{const n=document.createElement("script");n.setAttribute("src",o),n.onload=e,n.onerror=e=>{const n=fe("internal-error");n.customData=e,t(n)},n.type="text/javascript",n.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(n)}))).catch((e=>n(e)))}a()}})).catch((e=>{throw yn=null,e}))}(e),yn}const wn=new ke(5e3,15e3),_n={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},In=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tn(e){const t=e.config;ve(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Se(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:oe},r=In.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${O(i).slice(1)}`}const En={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class kn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Sn(e,t,n,i,r,s){ve(e.config.authDomain,e,"auth-domain-config-required"),ve(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:oe,eventId:r};if(t instanceof bt){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof wt){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){return e.emulator?Se(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${O(a).slice(1)}`}const Rn="webStorageSupport",Cn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lt,this._completeRedirectFn=hn}async _openPopup(e,t,n,i){var r;return be(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},En),{width:i.toString(),height:r.toString(),top:s,left:o}),h=E().toLowerCase();n&&(a=et(h)?"_blank":n),Qe(h)&&(t=t||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=E()){var t;return st(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(h)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new kn(null);const u=window.open(t||"",a,l);ve(u,e,"popup-blocked");try{u.focus()}catch(e){}return new kn(u)}(e,Sn(e,t,n,Ie(),i),xt())}async _openRedirect(e,t,n,i){var r;return await this._originValidation(e),r=Sn(e,t,n,Ie(),i),jt().location.href=r,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(be(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await bn(e),n=jt().gapi;return ve(n,e,"internal-error"),t.open({where:document.body,url:Tn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_n,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=fe(e,"network-request-failed"),s=jt().setTimeout((()=>{i(r)}),wn.get());function o(){jt().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}(e),n=new ln(e);return t.register("authEvent",(t=>(ve(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rn,{type:Rn},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==r&&t(!!r),pe(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Pe(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(gn(e))return}catch(e){}pe(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ot()||Ze()||st()}};var An,On="@firebase/auth",Pn="0.19.7";class Nn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Dn(e=function(e="[DEFAULT]"){const t=Z.get(e);if(!t)throw re.create("no-app",{appName:e});return t}()){const t=ie(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=ie(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(C(n.getOptions(),null!=t?t:{}))return e;pe(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Cn,persistence:[Jt,Nt,Lt]})}An="Browser",ne(new x("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:i,authDomain:r}=n.options;return(e=>{ve(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),ve(!(null==r?void 0:r.includes(":")),"argument-error",{appName:e.name});const n={apiKey:i,authDomain:r,clientPlatform:An,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:at(An)},s=new ct(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(_e);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),ne(new x("auth-internal",(e=>(e=>new Nn(e))(ht(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),ae(On,Pn,void 0),ae(On,Pn,"esm2017");var Ln,Mn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},xn={},Un=Un||{},jn=Mn||self;function Fn(){}function Bn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Hn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var $n="closure_uid_"+(1e9*Math.random()>>>0),Vn=0;function Kn(e,t,n){return e.call.apply(e.bind,arguments)}function qn(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function zn(e,t,n){return(zn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kn:qn).apply(null,arguments)}function Wn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Gn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function Jn(){this.s=this.s,this.o=this.o}var Xn={};Jn.prototype.s=!1,Jn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,$n)&&e[$n]||(e[$n]=++Vn)}(this);delete Xn[e]}},Jn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Yn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Qn=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const i=e.length,r="string"==typeof e?e.split(""):e;for(let s=0;s<i;s++)s in r&&t.call(n,r[s],s,e)};function Zn(e){return Array.prototype.concat.apply([],arguments)}function ei(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function ti(e){return/^[\s\xa0]*$/.test(e)}var ni,ii=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ri(e,t){return-1!=e.indexOf(t)}function si(e,t){return e<t?-1:e>t?1:0}e:{var oi=jn.navigator;if(oi){var ai=oi.userAgent;if(ai){ni=ai;break e}}ni=""}function ci(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function hi(e){const t={};for(const n in e)t[n]=e[n];return t}var li="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ui(e,t){let n,i;for(let t=1;t<arguments.length;t++){for(n in i=arguments[t],i)e[n]=i[n];for(let t=0;t<li.length;t++)n=li[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function di(e){return di[" "](e),e}di[" "]=Fn;var pi,fi,gi=ri(ni,"Opera"),mi=ri(ni,"Trident")||ri(ni,"MSIE"),vi=ri(ni,"Edge"),yi=vi||mi,bi=ri(ni,"Gecko")&&!(ri(ni.toLowerCase(),"webkit")&&!ri(ni,"Edge"))&&!(ri(ni,"Trident")||ri(ni,"MSIE"))&&!ri(ni,"Edge"),wi=ri(ni.toLowerCase(),"webkit")&&!ri(ni,"Edge");function _i(){var e=jn.document;return e?e.documentMode:void 0}e:{var Ii="",Ti=(fi=ni,bi?/rv:([^\);]+)(\)|;)/.exec(fi):vi?/Edge\/([\d\.]+)/.exec(fi):mi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(fi):wi?/WebKit\/(\S+)/.exec(fi):gi?/(?:Version)[ \/]?(\S+)/.exec(fi):void 0);if(Ti&&(Ii=Ti?Ti[1]:""),mi){var Ei=_i();if(null!=Ei&&Ei>parseFloat(Ii)){pi=String(Ei);break e}}pi=Ii}var ki,Si={};function Ri(){return e=Si,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=ii(String(pi)).split("."),n=ii("9").split("."),i=Math.max(t.length,n.length);for(let o=0;0==e&&o<i;o++){var r=t[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;e=si(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||si(0==r[2].length,0==s[2].length)||si(r[2],s[2]),r=r[3],s=s[3]}while(0==e)}return 0<=e}();var e}jn.document&&mi?ki=_i()||parseInt(pi,10)||void 0:ki=void 0;var Ci=ki,Ai=function(){if(!jn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{jn.addEventListener("test",Fn,t),jn.removeEventListener("test",Fn,t)}catch(e){}return e}();function Oi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Pi(e,t){if(Oi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(bi){e:{try{di(t.nodeName);var r=!0;break e}catch(e){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Ni[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Pi.Z.h.call(this)}}Oi.prototype.h=function(){this.defaultPrevented=!0},Gn(Pi,Oi);var Ni={2:"touch",3:"pen",4:"mouse"};Pi.prototype.h=function(){Pi.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Di="closure_listenable_"+(1e6*Math.random()|0),Li=0;function Mi(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ia=r,this.key=++Li,this.ca=this.fa=!1}function xi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Ui(e){this.src=e,this.g={},this.h=0}function ji(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Yn(r,t);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(xi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Fi(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==i)return r}return-1}Ui.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Fi(e,t,i,r);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Mi(t,this.src,s,!!i,r)).fa=n,e.push(t)),t};var Bi="closure_lm_"+(1e6*Math.random()|0),Hi={};function $i(e,t,n,i,r){if(i&&i.once)return Ki(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)$i(e,t[s],n,i,r);return null}return n=Yi(n),e&&e[Di]?e.N(t,n,Hn(i)?!!i.capture:!!i,r):Vi(e,t,n,!1,i,r)}function Vi(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=Hn(r)?!!r.capture:!!r,a=Ji(e);if(a||(e[Bi]=a=new Ui(e)),(n=a.add(t,n,i,o,s)).proxy)return n;if(i=function(){var e=Gi;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)Ai||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(Wi(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function Ki(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ki(e,t[s],n,i,r);return null}return n=Yi(n),e&&e[Di]?e.O(t,n,Hn(i)?!!i.capture:!!i,r):Vi(e,t,n,!0,i,r)}function qi(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)qi(e,t[s],n,i,r);else i=Hn(i)?!!i.capture:!!i,n=Yi(n),e&&e[Di]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Fi(s=e.g[t],n,i,r))&&(xi(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Ji(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Fi(t,n,i,r)),(n=-1<e?t[e]:null)&&zi(n))}function zi(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Di])ji(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Wi(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Ji(t))?(ji(n,e),0==n.h&&(n.src=null,t[Bi]=null)):xi(e)}}}function Wi(e){return e in Hi?Hi[e]:Hi[e]="on"+e}function Gi(e,t){if(e.ca)e=!0;else{t=new Pi(t,this);var n=e.listener,i=e.ia||e.src;e.fa&&zi(e),e=n.call(i,t)}return e}function Ji(e){return(e=e[Bi])instanceof Ui?e:null}var Xi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yi(e){return"function"==typeof e?e:(e[Xi]||(e[Xi]=function(t){return e.handleEvent(t)}),e[Xi])}function Qi(){Jn.call(this),this.i=new Ui(this),this.P=this,this.I=null}function Zi(e,t){var n,i=e.I;if(i)for(n=[];i;i=i.I)n.push(i);if(e=e.P,i=t.type||t,"string"==typeof t)t=new Oi(t,e);else if(t instanceof Oi)t.target=t.target||e;else{var r=t;ui(t=new Oi(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=er(o,i,!0,t)&&r}if(r=er(o=t.g=e,i,!0,t)&&r,r=er(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=er(o=t.g=n[s],i,!1,t)&&r}function er(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&ji(e.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}Gn(Qi,Jn),Qi.prototype[Di]=!0,Qi.prototype.removeEventListener=function(e,t,n,i){qi(this,e,t,n,i)},Qi.prototype.M=function(){if(Qi.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)xi(n[i]);delete t.g[e],t.h--}}this.I=null},Qi.prototype.N=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},Qi.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var tr=jn.JSON.stringify;function nr(){var e=hr;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ir,rr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new sr),(e=>e.reset()));class sr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function or(e){jn.setTimeout((()=>{throw e}),0)}function ar(e,t){ir||function(){var e=jn.Promise.resolve(void 0);ir=function(){e.then(lr)}}(),cr||(ir(),cr=!0),hr.add(e,t)}var cr=!1,hr=new class{constructor(){this.h=this.g=null}add(e,t){const n=rr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function lr(){for(var e;e=nr();){try{e.h.call(e.g)}catch(e){or(e)}var t=rr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}cr=!1}function ur(e,t){Qi.call(this),this.h=e||1,this.g=t||jn,this.j=zn(this.kb,this),this.l=Date.now()}function dr(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function pr(e,t,n){if("function"==typeof e)n&&(e=zn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=zn(e.handleEvent,e)}return 2147483647<Number(t)?-1:jn.setTimeout(e,t||0)}function fr(e){e.g=pr((()=>{e.g=null,e.i&&(e.i=!1,fr(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Gn(ur,Qi),(Ln=ur.prototype).da=!1,Ln.S=null,Ln.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Zi(this,"tick"),this.da&&(dr(this),this.start()))}},Ln.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ln.M=function(){ur.Z.M.call(this),dr(this),delete this.g};class gr extends Jn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fr(this)}M(){super.M(),this.g&&(jn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mr(e){Jn.call(this),this.h=e,this.g={}}Gn(mr,Jn);var vr=[];function yr(e,t,n,i){Array.isArray(n)||(n&&(vr[0]=n.toString()),n=vr);for(var r=0;r<n.length;r++){var s=$i(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function br(e){ci(e.g,(function(e,t){this.g.hasOwnProperty(t)&&zi(e)}),e),e.g={}}function wr(){this.g=!0}function _r(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return tr(n)}catch(e){return t}}(e,n)+(i?" "+i:"")}))}mr.prototype.M=function(){mr.Z.M.call(this),br(this)},mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wr.prototype.Aa=function(){this.g=!1},wr.prototype.info=function(){};var Ir={},Tr=null;function Er(){return Tr=Tr||new Qi}function kr(e){Oi.call(this,Ir.Ma,e)}function Sr(e){const t=Er();Zi(t,new kr(t,e))}function Rr(e,t){Oi.call(this,Ir.STAT_EVENT,e),this.stat=t}function Cr(e){const t=Er();Zi(t,new Rr(t,e))}function Ar(e,t){Oi.call(this,Ir.Na,e),this.size=t}function Or(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return jn.setTimeout((function(){e()}),t)}Ir.Ma="serverreachability",Gn(kr,Oi),Ir.STAT_EVENT="statevent",Gn(Rr,Oi),Ir.Na="timingevent",Gn(Ar,Oi);var Pr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Nr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Dr(){}function Lr(e){return e.h||(e.h=e.i())}function Mr(){}Dr.prototype.h=null;var xr,Ur={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function jr(){Oi.call(this,"d")}function Fr(){Oi.call(this,"c")}function Br(){}function Hr(e,t,n,i){this.l=e,this.j=t,this.m=n,this.X=i||1,this.V=new mr(this),this.P=Vr,e=yi?125:void 0,this.W=new ur(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $r}function $r(){this.i=null,this.g="",this.h=!1}Gn(jr,Oi),Gn(Fr,Oi),Gn(Br,Dr),Br.prototype.g=function(){return new XMLHttpRequest},Br.prototype.i=function(){return{}},xr=new Br;var Vr=45e3,Kr={},qr={};function zr(e,t,n){e.K=1,e.v=gs(hs(t)),e.s=n,e.U=!0,Wr(e,null)}function Wr(e,t){e.F=Date.now(),Yr(e),e.A=hs(e.v);var n=e.A,i=e.X;Array.isArray(i)||(i=[String(i)]),Cs(n.h,"t",i),e.C=0,n=e.l.H,e.h=new $r,e.g=Ao(e.l,n?t:null,!e.s),0<e.O&&(e.L=new gr(zn(e.Ia,e,e.g),e.O)),yr(e.V,e.g,"readystatechange",e.gb),t=e.H?hi(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Sr(1),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var h=a[c].split("=");if(1<h.length){var l=h[0];h=h[1];var u=l.split("_");o=2<=u.length&&"type"==u[1]?o+(l+"=")+h+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Gr(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function Jr(e,t,n){let i,r=!0;for(;!e.I&&e.C<n.length;){if(i=Xr(e,n),i==qr){4==t&&(e.o=4,Cr(14),r=!1),_r(e.j,e.m,null,"[Incomplete Response]");break}if(i==Kr){e.o=4,Cr(15),_r(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}_r(e.j,e.m,i,null),ns(e,i)}Gr(e)&&i!=qr&&i!=Kr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Cr(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),_o(t),t.L=!0,Cr(11))):(_r(e.j,e.m,n,"[Invalid Chunked Response]"),ts(e),es(e))}function Xr(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?qr:(n=Number(t.substring(n,i)),isNaN(n)?Kr:(i+=1)+n>t.length?qr:(t=t.substr(i,n),e.C=i+n,t))}function Yr(e){e.Y=Date.now()+e.P,Qr(e,e.P)}function Qr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Or(zn(e.eb,e),t)}function Zr(e){e.B&&(jn.clearTimeout(e.B),e.B=null)}function es(e){0==e.l.G||e.I||Eo(e.l,e)}function ts(e){Zr(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,dr(e.W),br(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ns(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ls(n.i,e)))if(n.I=e.N,!e.J&&Ls(n.i,e)&&3==n.G){try{var i=n.Ca.g.parse(t)}catch(e){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;To(n),uo(n)}wo(n),Cr(18)}}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&0==n.A&&!n.v&&(n.v=Or(zn(n.ab,n),6e3));if(1>=Ds(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else So(n,11)}else if((e.J||n.g==e)&&To(n),!ti(t))for(r=n.Ca.g.parse(t),t=0;t<r.length;t++){let h=r[t];if(n.U=h[0],h=h[1],2==n.G)if("c"==h[0]){n.J=h[1],n.la=h[2];const t=h[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const r=h[4];null!=r&&(n.za=r,n.h.info("SVER="+n.za));const l=h[5];null!=l&&"number"==typeof l&&0<l&&(i=1.5*l,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.i;!s.g&&(ri(e,"spdy")||ri(e,"quic")||ri(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Ms(s,s.h),s.h=null))}if(i.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.sa=e,fs(i.F,i.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((i=n).oa=Co(i,i.H?i.la:null,i.W),o.J){xs(i.i,o);var a=o,c=i.K;c&&a.setTimeout(c),a.B&&(Zr(a),Yr(a)),i.g=o}else bo(i);0<n.l.length&&go(n)}else"stop"!=h[0]&&"close"!=h[0]||So(n,7);else 3==n.G&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?So(n,7):lo(n):"noop"!=h[0]&&n.j&&n.j.wa(h),n.A=0)}Sr(4)}catch(e){}}function is(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Bn(e)||"string"==typeof e)Qn(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Bn(e)||"string"==typeof e){n=[];for(var i=e.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,e)n[i++]=r;i=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Bn(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}}function rs(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof rs)for(n=e.T(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function ss(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var i=e.g[t];os(e.h,i)&&(e.g[n++]=i),t++}e.g.length=n}if(e.i!=e.g.length){var r={};for(n=t=0;t<e.g.length;)os(r,i=e.g[t])||(e.g[n++]=i,r[i]=1),t++;e.g.length=n}}function os(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Ln=Hr.prototype).setTimeout=function(e){this.P=e},Ln.gb=function(e){e=e.target;const t=this.L;t&&3==so(e)?t.l():this.Ia(e)},Ln.Ia=function(e){try{if(e==this.g)e:{const l=so(this.g);var t=this.g.Da();const u=this.g.ba();if(!(3>l)&&(3!=l||yi||this.g&&(this.h.h||this.g.ga()||oo(this.g)))){this.I||4!=l||7==t||Sr(8==t||0>=u?3:2),Zr(this);var n=this.g.ba();this.N=n;t:if(Gr(this)){var i=oo(this.g);e="";var r=i.length,s=4==so(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ts(this),es(this);var o="";break t}this.h.i=new jn.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,i,r,s,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ti(a)){var h=a;break t}}h=null}if(!(n=h)){this.i=!1,this.o=3,Cr(12),ts(this),es(this);break e}_r(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ns(this,n)}this.U?(Jr(this,l,o),yi&&this.i&&3==l&&(yr(this.V,this.W,"tick",this.fb),this.W.start())):(_r(this.j,this.m,o,null),ns(this,o)),4==l&&ts(this),this.i&&!this.I&&(4==l?Eo(this.l,this):(this.i=!1,Yr(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Cr(12)):(this.o=0,Cr(13)),ts(this),es(this)}}}catch(e){}},Ln.fb=function(){if(this.g){var e=so(this.g),t=this.g.ga();this.C<t.length&&(Zr(this),Jr(this,e,t),this.i&&4!=e&&Yr(this))}},Ln.cancel=function(){this.I=!0,ts(this)},Ln.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Sr(3),Cr(17)),ts(this),this.o=2,es(this)):Qr(this,this.Y-e)},(Ln=rs.prototype).R=function(){ss(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Ln.T=function(){return ss(this),this.g.concat()},Ln.get=function(e,t){return os(this.h,e)?this.h[e]:t},Ln.set=function(e,t){os(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Ln.forEach=function(e,t){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);e.call(t,s,r,this)}};var as=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cs(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof cs){this.g=void 0!==t?t:e.g,ls(this,e.j),this.s=e.s,us(this,e.i),ds(this,e.m),this.l=e.l,t=e.h;var n=new Es;n.i=t.i,t.g&&(n.g=new rs(t.g),n.h=t.h),ps(this,n),this.o=e.o}else e&&(n=String(e).match(as))?(this.g=!!t,ls(this,n[1]||"",!0),this.s=ms(n[2]||""),us(this,n[3]||"",!0),ds(this,n[4]),this.l=ms(n[5]||"",!0),ps(this,n[6]||"",!0),this.o=ms(n[7]||"")):(this.g=!!t,this.h=new Es(null,this.g))}function hs(e){return new cs(e)}function ls(e,t,n){e.j=n?ms(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function us(e,t,n){e.i=n?ms(t,!0):t}function ds(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ps(e,t,n){t instanceof Es?(e.h=t,function(e,t){t&&!e.j&&(ks(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ss(this,t),Cs(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=vs(t,Is)),e.h=new Es(t,e.g))}function fs(e,t,n){e.h.set(t,n)}function gs(e){return fs(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ms(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vs(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ys),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ys(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}cs.prototype.toString=function(){var e=[],t=this.j;t&&e.push(vs(t,bs,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(vs(t,bs,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(vs(n,"/"==n.charAt(0)?_s:ws,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",vs(n,Ts)),e.join("")};var bs=/[#\/\?@]/g,ws=/[#\?:]/g,_s=/[#\?]/g,Is=/[#\?@]/g,Ts=/#/g;function Es(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ks(e){e.g||(e.g=new rs,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ss(e,t){ks(e),t=As(e,t),os(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,os((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ss(e)))}function Rs(e,t){return ks(e),t=As(e,t),os(e.g.h,t)}function Cs(e,t,n){Ss(e,t),0<n.length&&(e.i=null,e.g.set(As(e,t),ei(n)),e.h+=n.length)}function As(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Os(e){this.l=e||Ps,e=jn.PerformanceNavigationTiming?0<(e=jn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(jn.g&&jn.g.Ea&&jn.g.Ea()&&jn.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ln=Es.prototype).add=function(e,t){ks(this),this.i=null,e=As(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ln.forEach=function(e,t){ks(this),this.g.forEach((function(n,i){Qn(n,(function(n){e.call(t,n,i,this)}),this)}),this)},Ln.T=function(){ks(this);for(var e=this.g.R(),t=this.g.T(),n=[],i=0;i<t.length;i++)for(var r=e[i],s=0;s<r.length;s++)n.push(t[i]);return n},Ln.R=function(e){ks(this);var t=[];if("string"==typeof e)Rs(this,e)&&(t=Zn(t,this.g.get(As(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Zn(t,e[n])}return t},Ln.set=function(e,t){return ks(this),this.i=null,Rs(this,e=As(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ln.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Ln.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var i=t[n],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;""!==i[s]&&(o+="="+encodeURIComponent(String(i[s]))),e.push(o)}}return this.i=e.join("&")};var Ps=10;function Ns(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ds(e){return e.h?1:e.g?e.g.size:0}function Ls(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ms(e,t){e.g?e.g.add(t):e.h=t}function xs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Us(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return ei(e.i)}function js(){}function Fs(){this.g=new js}function Bs(e,t,n){const i=n||"";try{is(e,(function(e,n){let r=e;Hn(e)&&(r=tr(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(e){throw t.push(i+"type="+encodeURIComponent("_badmap")),e}}function Hs(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(e){}}function $s(e){this.l=e.$b||null,this.j=e.ib||!1}function Vs(e,t){Qi.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ks,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Os.prototype.cancel=function(){if(this.i=Us(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},js.prototype.stringify=function(e){return jn.JSON.stringify(e,void 0)},js.prototype.parse=function(e){return jn.JSON.parse(e,void 0)},Gn($s,Dr),$s.prototype.g=function(){return new Vs(this.l,this.j)},$s.prototype.i=function(e){return function(){return e}}({}),Gn(Vs,Qi);var Ks=0;function qs(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function zs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ws(e)}function Ws(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ln=Vs.prototype).open=function(e,t){if(this.readyState!=Ks)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ws(this)},Ln.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||jn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Ln.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zs(this)),this.readyState=Ks},Ln.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==jn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qs(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Ln.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?zs(this):Ws(this),3==this.readyState&&qs(this)}},Ln.Ua=function(e){this.g&&(this.response=this.responseText=e,zs(this))},Ln.Ta=function(e){this.g&&(this.response=e,zs(this))},Ln.ha=function(){this.g&&zs(this)},Ln.setRequestHeader=function(e,t){this.v.append(e,t)},Ln.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ln.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Gs=jn.JSON.parse;function Js(e){Qi.call(this),this.headers=new rs,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Xs,this.K=this.L=!1}Gn(Js,Qi);var Xs="",Ys=/^https?$/i,Qs=["POST","PUT"];function Zs(e){return"content-type"==e.toLowerCase()}function eo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,to(e),io(e)}function to(e){e.D||(e.D=!0,Zi(e,"complete"),Zi(e,"error"))}function no(e){if(e.h&&void 0!==Un&&(!e.C[1]||4!=so(e)||2!=e.ba()))if(e.v&&4==so(e))pr(e.Fa,0,e);else if(Zi(e,"readystatechange"),4==so(e)){e.h=!1;try{const a=e.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===a){var r=String(e.H).match(as)[1]||null;if(!r&&jn.self&&jn.self.location){var s=jn.self.location.protocol;r=s.substr(0,s.length-1)}i=!Ys.test(r?r.toLowerCase():"")}n=i}if(n)Zi(e,"complete"),Zi(e,"success");else{e.m=6;try{var o=2<so(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.ba()+"]",to(e)}}finally{io(e)}}}function io(e,t){if(e.g){ro(e);const n=e.g,i=e.C[0]?Fn:null;e.g=null,e.C=null,t||Zi(e,"ready");try{n.onreadystatechange=i}catch(e){}}}function ro(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(jn.clearTimeout(e.A),e.A=null)}function so(e){return e.g?e.g.readyState:0}function oo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Xs:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ao(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=function(e){let t="";return ci(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):fs(e,t,n))}function co(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ho(e){this.za=0,this.l=[],this.h=new wr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=co("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=co("baseRetryDelayMs",5e3,e),this.$a=co("retryDelaySeedMs",1e4,e),this.Ya=co("forwardChannelMaxRetries",2,e),this.ra=co("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Os(e&&e.concurrentRequestLimit),this.Ca=new Fs,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function lo(e){if(po(e),3==e.G){var t=e.V++,n=hs(e.F);fs(n,"SID",e.J),fs(n,"RID",t),fs(n,"TYPE","terminate"),vo(e,n),(t=new Hr(e,e.h,t,void 0)).K=2,t.v=gs(hs(n)),n=!1,jn.navigator&&jn.navigator.sendBeacon&&(n=jn.navigator.sendBeacon(t.v.toString(),"")),!n&&jn.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ao(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Yr(t)}Ro(e)}function uo(e){e.g&&(_o(e),e.g.cancel(),e.g=null)}function po(e){uo(e),e.u&&(jn.clearTimeout(e.u),e.u=null),To(e),e.i.cancel(),e.m&&("number"==typeof e.m&&jn.clearTimeout(e.m),e.m=null)}function fo(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&go(e)}function go(e){Ns(e.i)||e.m||(e.m=!0,ar(e.Ha,e),e.C=0)}function mo(e,t){var n;n=t?t.m:e.V++;const i=hs(e.F);fs(i,"SID",e.J),fs(i,"RID",n),fs(i,"AID",e.U),vo(e,i),e.o&&e.s&&ao(i,e.o,e.s),n=new Hr(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=yo(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ms(e.i,n),zr(n,i,t)}function vo(e,t){e.j&&is({},(function(e,n){fs(t,n,e)}))}function yo(e,t,n){n=Math.min(e.l.length,n);var i=e.j?zn(e.j.Oa,e.j,e):null;e:{var r=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].h;const a=r[o].g;if(n-=t,0>n)t=Math.max(0,r[o].h-100),s=!1;else try{Bs(a,e,"req"+n+"_")}catch(e){i&&i(a)}}if(s){i=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,i}function bo(e){e.g||e.u||(e.Y=1,ar(e.Ga,e),e.A=0)}function wo(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Or(zn(e.Ga,e),ko(e,e.A)),e.A++,0))}function _o(e){null!=e.B&&(jn.clearTimeout(e.B),e.B=null)}function Io(e){e.g=new Hr(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=hs(e.oa);fs(t,"RID","rpc"),fs(t,"SID",e.J),fs(t,"CI",e.N?"0":"1"),fs(t,"AID",e.U),vo(e,t),fs(t,"TYPE","xmlhttp"),e.o&&e.s&&ao(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=gs(hs(t)),n.s=null,n.U=!0,Wr(n,e)}function To(e){null!=e.v&&(jn.clearTimeout(e.v),e.v=null)}function Eo(e,t){var n=null;if(e.g==t){To(e),_o(e),e.g=null;var i=2}else{if(!Ls(e.i,t))return;n=t.D,xs(e.i,t),i=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.F;var r=e.C;Zi(i=Er(),new Ar(i,n,t,r)),go(e)}else bo(e);else if(3==(r=t.o)||0==r&&0<e.I||!(1==i&&function(e,t){return!(Ds(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Or(zn(e.Ha,e,t),ko(e,e.C)),e.C++,0)))}(e,t)||2==i&&wo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:So(e,5);break;case 4:So(e,10);break;case 3:So(e,6);break;default:So(e,2)}}function ko(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function So(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var i=zn(e.jb,e);n||(n=new cs("//www.google.com/images/cleardot.gif"),jn.location&&"http"==jn.location.protocol||ls(n,"https"),gs(n)),function(e,t){const n=new wr;if(jn.Image){const i=new Image;i.onload=Wn(Hs,n,i,"TestLoadImage: loaded",!0,t),i.onerror=Wn(Hs,n,i,"TestLoadImage: error",!1,t),i.onabort=Wn(Hs,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=Wn(Hs,n,i,"TestLoadImage: timeout",!1,t),jn.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else Cr(2);e.G=0,e.j&&e.j.va(t),Ro(e),po(e)}function Ro(e){e.G=0,e.I=-1,e.j&&(0==Us(e.i).length&&0==e.l.length||(e.i.i.length=0,ei(e.l),e.l.length=0),e.j.ua())}function Co(e,t,n){let i=function(e){return e instanceof cs?hs(e):new cs(e,void 0)}(n);if(""!=i.i)t&&us(i,t+"."+i.i),ds(i,i.m);else{const e=jn.location;i=function(e,t,n,i){var r=new cs(null,void 0);return e&&ls(r,e),t&&us(r,t),n&&ds(r,n),i&&(r.l=i),r}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&ci(e.aa,(function(e,t){fs(i,t,e)})),t=e.D,n=e.sa,t&&n&&fs(i,t,n),fs(i,"VER",e.ma),vo(e,i),i}function Ao(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Js(new $s({ib:!0})):new Js(e.qa)).L=e.H,t}function Oo(){}function Po(){if(mi&&!(10<=Number(Ci)))throw Error("Environmental error: no available transport.")}function No(e,t){Qi.call(this),this.g=new ho(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ti(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ti(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Mo(this)}function Do(e){jr.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Lo(){Fr.call(this),this.status=1}function Mo(e){this.g=e}(Ln=Js.prototype).ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xr.g(),this.C=this.u?Lr(this.u):Lr(xr),this.g.onreadystatechange=zn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void eo(this,e)}e=n||"";const r=new rs(this.headers);i&&is(i,(function(e,t){r.set(t,e)})),i=function(e){e:{var t=Zs;const n=e.length,i="string"==typeof e?e.split(""):e;for(let r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e)){t=r;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(r.T()),n=jn.FormData&&e instanceof jn.FormData,!(0<=Yn(Qs,t))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ro(this),0<this.B&&((this.K=function(e){return mi&&Ri()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zn(this.pa,this)):this.A=pr(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){eo(this,e)}},Ln.pa=function(){void 0!==Un&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zi(this,"timeout"),this.abort(8))},Ln.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Zi(this,"complete"),Zi(this,"abort"),io(this))},Ln.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),io(this,!0)),Js.Z.M.call(this)},Ln.Fa=function(){this.s||(this.F||this.v||this.l?no(this):this.cb())},Ln.cb=function(){no(this)},Ln.ba=function(){try{return 2<so(this)?this.g.status:-1}catch(e){return-1}},Ln.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Ln.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Gs(t)}},Ln.Da=function(){return this.m},Ln.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ln=ho.prototype).ma=8,Ln.G=1,Ln.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},Ln.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const r=new Hr(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=hi(s),ui(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var i=this.l[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=yo(this,r,t),fs(n=hs(this.F),"RID",e),fs(n,"CVER",22),this.D&&fs(n,"X-HTTP-Session-Id",this.D),vo(this,n),this.o&&s&&ao(n,this.o,s),Ms(this.i,r),this.Ra&&fs(n,"TYPE","init"),this.ja?(fs(n,"$req",t),fs(n,"SID","null"),r.$=!0,zr(r,n,null)):zr(r,n,t),this.G=2}}else 3==this.G&&(e?mo(this,e):0==this.l.length||Ns(this.i)||mo(this))},Ln.Ga=function(){if(this.u=null,Io(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Or(zn(this.bb,this),e)}},Ln.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Cr(10),uo(this),Io(this))},Ln.ab=function(){null!=this.v&&(this.v=null,uo(this),wo(this),Cr(19))},Ln.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Cr(2)):(this.h.info("Failed to ping google.com"),Cr(1))},(Ln=Oo.prototype).xa=function(){},Ln.wa=function(){},Ln.va=function(){},Ln.ua=function(){},Ln.Oa=function(){},Po.prototype.g=function(e,t){return new No(e,t)},Gn(No,Qi),No.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),ar(zn(e.hb,e,t))),Cr(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Co(e,null,e.W),go(e)},No.prototype.close=function(){lo(this.g)},No.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,fo(this.g,t)}else this.v?((t={}).__data__=tr(e),fo(this.g,t)):fo(this.g,e)},No.prototype.M=function(){this.g.j=null,delete this.j,lo(this.g),delete this.g,No.Z.M.call(this)},Gn(Do,jr),Gn(Lo,Fr),Gn(Mo,Oo),Mo.prototype.xa=function(){Zi(this.g,"a")},Mo.prototype.wa=function(e){Zi(this.g,new Do(e))},Mo.prototype.va=function(e){Zi(this.g,new Lo(e))},Mo.prototype.ua=function(){Zi(this.g,"b")},Po.prototype.createWebChannel=Po.prototype.g,No.prototype.send=No.prototype.u,No.prototype.open=No.prototype.m,No.prototype.close=No.prototype.close,Pr.NO_ERROR=0,Pr.TIMEOUT=8,Pr.HTTP_ERROR=6,Nr.COMPLETE="complete",Mr.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",Qi.prototype.listen=Qi.prototype.N,Js.prototype.listenOnce=Js.prototype.O,Js.prototype.getLastError=Js.prototype.La,Js.prototype.getLastErrorCode=Js.prototype.Da,Js.prototype.getStatus=Js.prototype.ba,Js.prototype.getResponseJson=Js.prototype.Qa,Js.prototype.getResponseText=Js.prototype.ga,Js.prototype.send=Js.prototype.ea,xn.createWebChannelTransport=function(){return new Po},xn.getStatEventTarget=function(){return Er()},xn.ErrorCode=Pr,xn.EventType=Nr,xn.Event=Ir,xn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},xn.FetchXmlHttpFactory=$s,xn.WebChannel=Mr,xn.XhrIo=Js;const xo="@firebase/firestore";class Uo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Uo.UNAUTHENTICATED=new Uo(null),Uo.GOOGLE_CREDENTIALS=new Uo("google-credentials-uid"),Uo.FIRST_PARTY=new Uo("first-party-uid"),Uo.MOCK_USER=new Uo("mock-user");let jo="9.6.5";const Fo=new W("@firebase/firestore");function Bo(e,...t){if(Fo.logLevel<=H.DEBUG){const n=t.map($o);Fo.debug(`Firestore (${jo}): ${e}`,...n)}}function Ho(e,...t){if(Fo.logLevel<=H.ERROR){const n=t.map($o);Fo.error(`Firestore (${jo}): ${e}`,...n)}}function $o(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Vo(e="Unexpected state"){const t=`FIRESTORE (${jo}) INTERNAL ASSERTION FAILED: `+e;throw Ho(t),new Error(t)}function Ko(e,t){e||Vo()}const qo="cancelled",zo="invalid-argument",Wo="failed-precondition",Go="unavailable";class Jo extends k{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Yo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Uo.UNAUTHENTICATED)))}shutdown(){}}class Zo{constructor(e){this.t=e,this.currentUser=Uo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Xo;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Xo,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{Bo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Bo("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Xo)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Bo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ko("string"==typeof t.accessToken),new Yo(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ko(null===e||"string"==typeof e),new Uo(e)}}class ea{constructor(e,t,n){this.type="FirstParty",this.user=Uo.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class ta{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new ea(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Uo.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class na{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ia{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=n=>{e.enqueueRetryable((()=>(e=>(null!=e.error&&Bo("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`),t(e.token)))(n)))};const n=e=>{Bo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>n(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?n(e):Bo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ko("string"==typeof e.token),new na(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ra(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}function sa(e,t){return e<t?-1:e>t?1:0}class oa{constructor(e,t,n){void 0===t?t=0:t>e.length&&Vo(),void 0===n?n=e.length-t:n>e.length-t&&Vo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===oa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof oa?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class aa extends oa{construct(e,t,n){return new aa(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Jo(zo,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new aa(t)}static emptyPath(){return new aa([])}}class ca{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ca(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ca(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ca.EMPTY_BYTE_STRING=new ca("");class ha{constructor(e){this.path=e}static fromPath(e){return new ha(aa.fromString(e))}static fromName(e){return new ha(aa.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===aa.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return aa.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ha(new aa(e.slice()))}}var la,ua;(ua=la||(la={}))[ua.OK=0]="OK",ua[ua.CANCELLED=1]="CANCELLED",ua[ua.UNKNOWN=2]="UNKNOWN",ua[ua.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ua[ua.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ua[ua.NOT_FOUND=5]="NOT_FOUND",ua[ua.ALREADY_EXISTS=6]="ALREADY_EXISTS",ua[ua.PERMISSION_DENIED=7]="PERMISSION_DENIED",ua[ua.UNAUTHENTICATED=16]="UNAUTHENTICATED",ua[ua.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ua[ua.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ua[ua.ABORTED=10]="ABORTED",ua[ua.OUT_OF_RANGE=11]="OUT_OF_RANGE",ua[ua.UNIMPLEMENTED=12]="UNIMPLEMENTED",ua[ua.INTERNAL=13]="INTERNAL",ua[ua.UNAVAILABLE=14]="UNAVAILABLE",ua[ua.DATA_LOSS=15]="DATA_LOSS";class da{constructor(e,t){this.comparator=e,this.root=t||fa.EMPTY}insert(e,t){return new da(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fa.BLACK,null,null))}remove(e){return new da(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pa(this.root,e,this.comparator,!1)}getReverseIterator(){return new pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pa(this.root,e,this.comparator,!0)}}class pa{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fa{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:fa.RED,this.left=null!=i?i:fa.EMPTY,this.right=null!=r?r:fa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new fa(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return fa.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vo();if(this.right.isRed())throw Vo();const e=this.left.check();if(e!==this.right.check())throw Vo();return e+(this.isRed()?0:1)}}fa.EMPTY=null,fa.RED=!0,fa.BLACK=!1,fa.EMPTY=new class{constructor(){this.size=0}get key(){throw Vo()}get value(){throw Vo()}get color(){throw Vo()}get left(){throw Vo()}get right(){throw Vo()}copy(e,t,n,i,r){return this}insert(e,t,n){return new fa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ga{constructor(e){this.comparator=e,this.data=new da(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ma(this.data.getIterator())}getIteratorFrom(e){return new ma(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ga))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ga(this.comparator);return t.data=e,t}}class ma{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function va(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ba(t)),t=ya(e.get(n),t);return ba(t)}function ya(e,t){let n=t;const i=e.length;for(let t=0;t<i;t++){const i=e.charAt(t);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function ba(e){return e+""}new da(ha.comparator),new da(ha.comparator),new da(ha.comparator),new ga(ha.comparator),new ga(sa);class wa{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}wa.store="owner",wa.key="owner";class _a{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}_a.store="mutationQueues",_a.keyPath="userId";class Ia{constructor(e,t,n,i,r){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=i,this.mutations=r}}Ia.store="mutations",Ia.keyPath="batchId",Ia.userMutationsIndex="userMutationsIndex",Ia.userMutationsKeyPath=["userId","batchId"];class Ta{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,va(t)]}static key(e,t,n){return[e,va(t),n]}}Ta.store="documentMutations",Ta.PLACEHOLDER=new Ta;class Ea{constructor(e,t,n,i,r,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=i,this.readTime=r,this.parentPath=s}}Ea.store="remoteDocuments",Ea.readTimeIndex="readTimeIndex",Ea.readTimeIndexPath="readTime",Ea.collectionReadTimeIndex="collectionReadTimeIndex",Ea.collectionReadTimeIndexPath=["parentPath","readTime"];class ka{constructor(e){this.byteSize=e}}ka.store="remoteDocumentGlobal",ka.key="remoteDocumentGlobalKey";class Sa{constructor(e,t,n,i,r,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=i,this.lastListenSequenceNumber=r,this.lastLimboFreeSnapshotVersion=s,this.query=o}}Sa.store="targets",Sa.keyPath="targetId",Sa.queryTargetsIndexName="queryTargetsIndex",Sa.queryTargetsKeyPath=["canonicalId","targetId"];class Ra{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}Ra.store="targetDocuments",Ra.keyPath=["targetId","path"],Ra.documentTargetsIndex="documentTargetsIndex",Ra.documentTargetsKeyPath=["path","targetId"];class Ca{constructor(e,t,n,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=i}}Ca.key="targetGlobalKey",Ca.store="targetGlobal";class Aa{constructor(e,t){this.collectionId=e,this.parent=t}}Aa.store="collectionParents",Aa.keyPath=["collectionId","parent"];class Oa{constructor(e,t,n,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=i}}Oa.store="clientMetadata",Oa.keyPath="clientId";class Pa{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Pa.store="bundles",Pa.keyPath="bundleId";class Na{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}function Da(e){return"IndexedDbTransactionError"===e.name}Na.store="namedQueries",Na.keyPath="name",_a.store,Ia.store,Ta.store,Ea.store,Sa.store,wa.store,Ca.store,Ra.store,Oa.store,ka.store,Aa.store,Pa.store,Na.store;class La{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new La(e,La.DEFAULT_COLLECTION_PERCENTILE,La.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ma(){return"undefined"!=typeof document?document:null}La.DEFAULT_COLLECTION_PERCENTILE=10,La.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,La.DEFAULT=new La(41943040,La.DEFAULT_COLLECTION_PERCENTILE,La.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),La.DISABLED=new La(-1,0,0);class xa{constructor(e,t,n=1e3,i=1.5,r=6e4){this.Me=e,this.timerId=t,this.Wi=n,this.Gi=i,this.zi=r,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),i=Math.max(0,t-n);i>0&&Bo("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,i,(()=>(this.Yi=Date.now(),e()))),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class Ua{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Xo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new Ua(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jo(qo,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class ja{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Uo.UNAUTHENTICATED,this.clientId=class{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=ra(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%e.length))}return n}}.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Bo("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Bo("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Jo(Wo,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=function(e,t){if(Ho("AsyncQueue",`${t}: ${e}`),Da(e))return new Jo(Go,`${t}: ${e}`);throw e}(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}class Fa{constructor(e,t,n,i,r,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Ba{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ba&&e.projectId===this.projectId&&e.database===this.database}}const Ha=new Map;class $a{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Jo(zo,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Jo(zo,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,i){if(!0===t&&!0===i)throw new Jo(zo,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Va{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new xa(this,"async_queue_retry"),this.bc=()=>{const e=Ma();e&&Bo("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ur.er()};const e=Ma();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pc(),this.vc(e)}enterRestrictedMode(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;const t=Ma();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}enqueue(e){if(this.Pc(),this.yc)return new Promise((()=>{}));const t=new Xo;return this.vc((()=>this.yc&&this.Ac?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.gc.push(e),this.Vc())))}async Vc(){if(0!==this.gc.length){try{await this.gc[0](),this.gc.shift(),this.ur.reset()}catch(e){if(!Da(e))throw e;Bo("AsyncQueue","Operation failed with retryable error: "+e)}this.gc.length>0&&this.ur.Zi((()=>this.Vc()))}}vc(e){const t=this.mc.then((()=>(this.Ic=!0,e().catch((e=>{this.Ec=e,this.Ic=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ho("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Ic=!1,e))))));return this.mc=t,t}enqueueAfterDelay(e,t,n){this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);const i=Ua.createAndSchedule(this,e,t,n,(e=>this.Sc(e)));return this.Tc.push(i),i}Pc(){this.Ec&&Vo()}verifyOperationInProgress(){}async Dc(){let e;do{e=this.mc,await e}while(e!==this.mc)}Cc(e){for(const t of this.Tc)if(t.timerId===e)return!0;return!1}Nc(e){return this.Dc().then((()=>{this.Tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Dc()}))}kc(e){this.Rc.push(e)}Sc(e){const t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}class Ka extends class{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $a({}),this._settingsFrozen=!1,e instanceof Ba?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Jo(zo,'"projectId" not provided in firebase.initializeApp.');return new Ba(e.options.projectId)}(e))}get app(){if(!this._app)throw new Jo(Wo,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Jo(Wo,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $a(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Qo;switch(e.type){case"gapi":const t=e.client;return Ko(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ta(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Jo(zo,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ha.get(e);t&&(Bo("ComponentProvider","Removing Datastore"),Ha.delete(e),t.terminate())}(this),Promise.resolve()}}{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new Va,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||function(e){var t;const n=e._freezeSettings(),i=function(e,t,n,i){return new Fa(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new ja(e._authCredentials,e._appCheckCredentials,e._queue,i)}(this),this._firestoreClient.terminate()}}!function(e,t=!0){jo="9.6.5",ne(new x("firestore",((e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=new Ka(i,new Zo(e.getProvider("auth-internal")),new ia(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),r._setSettings(n),r}),"PUBLIC")),ae(xo,"3.4.4",e),ae(xo,"3.4.4","esm2017")}();const qa="firebasestorage.googleapis.com";class za extends k{constructor(e,t){super(Wa(e),`Firebase Storage: ${t} (${Wa(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,za.prototype)}_codeEquals(e){return Wa(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}function Wa(e){return"storage/"+e}function Ga(e){return new za("invalid-argument",e)}function Ja(){return new za("app-deleted","The Firebase app was deleted.")}class Xa{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Xa.makeFromUrl(e,t)}catch(t){return new Xa(e,"")}if(""===n.path)return n;throw new za("invalid-default-bucket","Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===qa?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let t=0;t<a.length;t++){const i=a[t],r=i.regex.exec(e);if(r){const e=r[i.indices.bucket];let t=r[i.indices.path];t||(t=""),n=new Xa(e,t),i.postModify(n);break}}if(null==n)throw function(e){return new za("invalid-url","Invalid URL '"+e+"'.")}(e);return n}}class Ya{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Qa(e,t,n,i){if(i<t)throw Ga(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw Ga(`Invalid value for '${e}'. Expected ${n} or less.`)}var Za,ec;(ec=Za||(Za={}))[ec.NO_ERROR=0]="NO_ERROR",ec[ec.NETWORK_ERROR=1]="NETWORK_ERROR",ec[ec.ABORT=2]="ABORT";class tc{constructor(e,t,n,i,r,s,o,a,c,h,l){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=l,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(e){i(e)}else if(null!==r){const e=new za("unknown","An unknown error occurred, please check the error payload for server response.");e.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,e)):i(e)}else t.canceled?i(this.appDelete_?Ja():new za("canceled","User canceled the upload/download.")):i(new za("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new nc(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function c(){return 2===a}let h=!1;function l(...e){h||(h=!0,t.apply(null,e))}function u(t){r=setTimeout((()=>{r=null,e(p,c())}),t)}function d(){s&&clearTimeout(s)}function p(e,...t){if(h)return void d();if(e)return d(),void l.call(null,e,...t);if(c()||o)return d(),void l.call(null,e,...t);let n;i<64&&(i*=2),1===a?(a=2,n=0):n=1e3*(i+Math.random()),u(n)}let f=!1;function g(e){f||(f=!0,d(),h||(null!==r?(e||(a=2),clearTimeout(r),u(0)):e||(a=1)))}return u(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(((e,t)=>{if(t)return void e(!1,new nc(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===Za.NO_ERROR,r=n.getStatus();if(!t||this.isRetryStatusCode_(r)){const t=n.getErrorCode()===Za.ABORT;return void e(!1,new nc(!1,null,t))}const s=-1!==this.successCodes_.indexOf(r);e(!0,new nc(s,n))}))}),e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),i=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||i}}class nc{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}class ic{constructor(e,t){this._service=e,this._location=t instanceof Xa?t:Xa.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ic(e,t)}get root(){const e=new Xa(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Xa(this._location.bucket,e);return new ic(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new za("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function rc(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:Xa.makeFromBucketSpec(n,e)}class sc{constructor(e,t,n,i,r){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=qa,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Xa.makeFromBucketSpec(i,this._host):rc(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Xa.makeFromBucketSpec(this._url,e):this._bucket=rc(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qa("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qa("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ic(this,e)}_makeRequest(e,t,n,i){if(this._deleted)return new Ya(Ja());{const r=function(e,t,n,i,r,s){const o=function(e){const t=encodeURIComponent;let n="?";for(const i in e)e.hasOwnProperty(i)&&(n=n+(t(i)+"=")+t(e[i])+"&");return n=n.slice(0,-1),n}(e.urlParams),a=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,i),new tc(a,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r)}(e,this._appId,n,i,t,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((()=>this._requests.delete(r)),(()=>this._requests.delete(r))),r}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const oc="@firebase/storage",ac="0.9.2";ne(new x("storage",(function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new sc(n,i,r,t,oe)}),"PUBLIC").setMultipleInstances(!0)),ae(oc,ac,""),ae(oc,ac,"esm2017");var cc=n(676);const hc="@firebase/installations",lc="0.5.5",uc="w:0.5.5",dc=new S("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pc(e){return e instanceof k&&e.code.includes("request-failed")}function fc({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function gc(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function mc(e,t){const n=(await t.json()).error;return dc.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function vc({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function yc(e){const t=await e();return t.status>=500&&t.status<600?e():t}function bc(e){return new Promise((t=>{setTimeout(t,e)}))}const wc=/^[cdef][\w-]{21}$/;function _c(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return wc.test(t)?t:""}catch(e){return""}}function Ic(e){return`${e.appName}!${e.appId}`}const Tc=new Map;function Ec(e,t){const n=Ic(e);kc(n,t),function(e,t){const n=(!Sc&&"BroadcastChannel"in self&&(Sc=new BroadcastChannel("[Firebase] FID Change"),Sc.onmessage=e=>{kc(e.data.key,e.data.fid)}),Sc);n&&n.postMessage({key:e,fid:t}),0===Tc.size&&Sc&&(Sc.close(),Sc=null)}(n,t)}function kc(e,t){const n=Tc.get(e);if(n)for(const e of n)e(t)}let Sc=null;const Rc="firebase-installations-store";let Cc=null;function Ac(){return Cc||(Cc=(0,cc.openDb)("firebase-installations-database",1,(e=>{0===e.oldVersion&&e.createObjectStore(Rc)}))),Cc}async function Oc(e,t){const n=Ic(e),i=(await Ac()).transaction(Rc,"readwrite"),r=i.objectStore(Rc),s=await r.get(n);return await r.put(t,n),await i.complete,s&&s.fid===t.fid||Ec(e,t.fid),t}async function Pc(e){const t=Ic(e),n=(await Ac()).transaction(Rc,"readwrite");await n.objectStore(Rc).delete(t),await n.complete}async function Nc(e,t){const n=Ic(e),i=(await Ac()).transaction(Rc,"readwrite"),r=i.objectStore(Rc),s=await r.get(n),o=t(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.complete,!o||s&&s.fid===o.fid||Ec(e,o.fid),o}async function Dc(e){let t;const n=await Nc(e,(n=>{const i=function(e){return xc(e||{fid:_c(),registrationStatus:0})}(n),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(dc.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function(e,{fid:t}){const n=fc(e),i=vc(e),r={fid:t,authVersion:"FIS_v2",appId:e.appId,sdkVersion:uc},s={method:"POST",headers:i,body:JSON.stringify(r)},o=await yc((()=>fetch(n,s)));if(o.ok){const e=await o.json();return{fid:e.fid||t,registrationStatus:2,refreshToken:e.refreshToken,authToken:gc(e.authToken)}}throw await mc("Create Installation",o)}(e,t);return Oc(e,n)}catch(n){throw pc(n)&&409===n.customData.serverCode?await Pc(e):await Oc(e,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Lc(e)}:{installationEntry:t}}(e,i);return t=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Lc(e){let t=await Mc(e);for(;1===t.registrationStatus;)await bc(100),t=await Mc(e);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Dc(e);return n||t}return t}function Mc(e){return Nc(e,(e=>{if(!e)throw dc.create("installation-not-found");return xc(e)}))}function xc(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Uc({appConfig:e,platformLoggerProvider:t},n){const i=function(e,{fid:t}){return`${fc(e)}/${t}/authTokens:generate`}(e,n),r=function(e,{refreshToken:t}){const n=vc(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}(e,n),s=t.getImmediate({optional:!0});s&&r.append("x-firebase-client",s.getPlatformInfoString());const o={installation:{sdkVersion:uc}},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await yc((()=>fetch(i,a)));if(c.ok)return gc(await c.json());throw await mc("Generate Auth Token",c)}async function jc(e,t=!1){let n;const i=await Nc(e.appConfig,(i=>{if(!Bc(i))throw dc.create("not-registered");const r=i.authToken;if(!t&&(2===(s=r).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(s)))return i;var s;if(1===r.requestStatus)return n=async function(e,t){let n=await Fc(e.appConfig);for(;1===n.authToken.requestStatus;)await bc(100),n=await Fc(e.appConfig);const i=n.authToken;return 0===i.requestStatus?jc(e,t):i}(e,t),i;{if(!navigator.onLine)throw dc.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Uc(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await Oc(e.appConfig,i),n}catch(n){if(!pc(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Oc(e.appConfig,n)}else await Pc(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function Fc(e){return Nc(e,(e=>{if(!Bc(e))throw dc.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function Bc(e){return void 0!==e&&2===e.registrationStatus}function Hc(e){return dc.create("missing-app-config-values",{valueName:e})}const $c="installations";ne(new x($c,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Hc("App Configuration");if(!e.name)throw Hc("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Hc(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,platformLoggerProvider:ie(t,"platform-logger"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ne(new x("installations-internal",(e=>{const t=ie(e.getProvider("app").getImmediate(),$c).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await Dc(t.appConfig);return i?i.catch(console.error):jc(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await Dc(e);t&&await t}(n.appConfig),(await jc(n,t)).token}(t,e)}}),"PRIVATE")),ae(hc,lc),ae(hc,lc,"esm2017");const Vc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var Kc,qc;function zc(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Wc(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let e=0;e<n.length;++e)i[e]=n.charCodeAt(e);return i}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Kc||(Kc={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(qc||(qc={}));const Gc="fcm_token_details_db",Jc="fcm_token_object_Store",Xc="firebase-messaging-store";let Yc=null;function Qc(){return Yc||(Yc=(0,cc.openDb)("firebase-messaging-database",1,(e=>{0===e.oldVersion&&e.createObjectStore(Xc)}))),Yc}async function Zc(e){const t=th(e),n=await Qc(),i=await n.transaction(Xc).objectStore(Xc).get(t);if(i)return i;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(Gc))return null}let t=null;const n=await(0,cc.openDb)(Gc,5,(async n=>{var i;if(n.oldVersion<2)return;if(!n.objectStoreNames.contains(Jc))return;const r=n.transaction.objectStore(Jc),s=await r.index("fcmSenderId").get(e);if(await r.clear(),s)if(2===n.oldVersion){const e=s;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(i=e.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:zc(e.vapidKey)}}}else if(3===n.oldVersion){const e=s;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:zc(e.auth),p256dh:zc(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:zc(e.vapidKey)}}}else if(4===n.oldVersion){const e=s;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:zc(e.auth),p256dh:zc(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:zc(e.vapidKey)}}}}));return n.close(),await(0,cc.deleteDb)(Gc),await(0,cc.deleteDb)("fcm_vapid_details_db"),await(0,cc.deleteDb)("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await eh(e,t),t}}async function eh(e,t){const n=th(e),i=(await Qc()).transaction(Xc,"readwrite");return await i.objectStore(Xc).put(t,n),await i.complete,t}function th({appConfig:e}){return e.appId}const nh=new S("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function ih(e,t){const n={method:"DELETE",headers:await sh(e)};try{const i=await fetch(`${rh(e.appConfig)}/${t}`,n),r=await i.json();if(r.error){const e=r.error.message;throw nh.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw nh.create("token-unsubscribe-failed",{errorInfo:e})}}function rh({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}async function sh({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function oh({p256dh:e,auth:t,endpoint:n,vapidKey:i}){const r={web:{endpoint:n,auth:t,p256dh:e}};return i!==Vc&&(r.web.applicationPubKey=i),r}async function ah(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Wc(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:zc(t.getKey("auth")),p256dh:zc(t.getKey("p256dh"))},i=await Zc(e.firebaseDependencies);if(i){if(function(e,t){const n=t.vapidKey===e.vapidKey,i=t.endpoint===e.endpoint,r=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&i&&r&&s}(i.subscriptionOptions,n))return Date.now()>=i.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await sh(e),i=oh(t.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)};let s;try{const n=await fetch(`${rh(e.appConfig)}/${t.token}`,r);s=await n.json()}catch(e){throw nh.create("token-update-failed",{errorInfo:e})}if(s.error){const e=s.error.message;throw nh.create("token-update-failed",{errorInfo:e})}if(!s.token)throw nh.create("token-update-no-token");return s.token}(e.firebaseDependencies,t),i=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await eh(e.firebaseDependencies,i),n}catch(t){throw await async function(e){const t=await Zc(e.firebaseDependencies);t&&(await ih(e.firebaseDependencies,t.token),await async function(e){const t=th(e),n=(await Qc()).transaction(Xc,"readwrite");await n.objectStore(Xc).delete(t),await n.complete}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}(e),t}}(e,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await ih(e.firebaseDependencies,i.token)}catch(e){console.warn(e)}return ch(e.firebaseDependencies,n)}return ch(e.firebaseDependencies,n)}async function ch(e,t){const n=await async function(e,t){const n=await sh(e),i=oh(t),r={method:"POST",headers:n,body:JSON.stringify(i)};let s;try{const t=await fetch(rh(e.appConfig),r);s=await t.json()}catch(e){throw nh.create("token-subscribe-failed",{errorInfo:e})}if(s.error){const e=s.error.message;throw nh.create("token-subscribe-failed",{errorInfo:e})}if(!s.token)throw nh.create("token-subscribe-no-token");return s.token}(e,t),i={token:n,createTime:Date.now(),subscriptionOptions:t};return await eh(e,i),i.token}function hh(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const i=t.notification.body;i&&(e.notification.body=i);const r=t.notification.image;r&&(e.notification.image=r)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};const n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);const i=t.fcmOptions.analytics_label;i&&(e.fcmOptions.analyticsLabel=i)}(t,e),t}function lh(e,t){const n=[];for(let i=0;i<e.length;i++)n.push(e.charAt(i)),i<t.length&&n.push(t.charAt(i));return n.join("")}function uh(e){return nh.create("missing-app-config-values",{valueName:e})}lh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),lh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class dh{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function(e){if(!e||!e.options)throw uh("App Configuration Object");if(!e.name)throw uh("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const e of t)if(!n[e])throw uh(e);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function ph(e,t){if(!navigator)throw nh.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw nh.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Vc)}(e,null==t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await async function(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch((()=>{}))}catch(e){throw nh.create("failed-service-worker-registration",{browserErrorMessage:e.message})}}(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw nh.create("invalid-sw-registration");e.swRegistration=t}}(e,null==t?void 0:t.serviceWorkerRegistration),ah(e)}async function fh(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===qc.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(hh(n)):e.onMessageHandler.next(hh(n)));const i=n.data;var r;"object"==typeof(r=i)&&r&&"google.c.a.c_id"in r&&"1"===i["google.c.a.e"]&&await async function(e,t,n){const i=function(e){switch(e){case qc.NOTIFICATION_CLICKED:return"notification_open";case qc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}(e,n.messageType,i)}const gh="@firebase/messaging",mh="0.9.7";ne(new x("messaging",(e=>{const t=new dh(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(e=>fh(t,e))),t}),"PUBLIC")),ne(new x("messaging-internal",(e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>ph(t,e)}}),"PRIVATE")),ae(gh,mh),ae(gh,mh,"esm2017");const vh="@firebase/performance",yh="0.5.5",bh=yh,wh="FB-PERF-TRACE-MEASURE",_h="_wt_",Ih="_fcp",Th="_fid",Eh="@firebase/performance/config",kh="@firebase/performance/configexpire",Sh="Performance",Rh=new S("performance",Sh,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),Ch=new W(Sh);let Ah,Oh,Ph,Nh;Ch.logLevel=H.INFO;class Dh{constructor(e){if(this.window=e,!e)throw Rh.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){this.performance&&this.performance.mark&&this.performance.mark(e)}measure(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&"undefined"!=typeof navigator&&navigator.cookieEnabled?"object"==typeof indexedDB||(Ch.info("IndexedDB is not supported by current browswer"),!1):(Ch.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver((e=>{for(const n of e.getEntries())t(n)})).observe({entryTypes:[e]})}static getInstance(){return void 0===Ah&&(Ah=new Dh(Oh)),Ah}}function Lh(){return Ph}function Mh(e,t){const n=e.length-t.length;if(n<0||n>1)throw Rh.create("invalid String merger input");const i=[];for(let n=0;n<e.length;n++)i.push(e.charAt(n)),t.length>n&&i.push(t.charAt(n));return i.join("")}class xh{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Mh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Mh("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===Nh&&(Nh=new xh),Nh}}var Uh;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(Uh||(Uh={}));const jh=["firebase_","google_","ga_"],Fh=new RegExp("^[a-zA-Z]\\w*$");function Bh(){const e=Dh.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function Hh(){switch(Dh.getInstance().document.visibilityState){case"visible":return Uh.VISIBLE;case"hidden":return Uh.HIDDEN;default:return Uh.UNKNOWN}}function $h(){const e=Dh.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Vh(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.appId;if(!n)throw Rh.create("no app id");return n}const Kh="Could not fetch config, will use default configs";function qh(e){if(!e)return e;const t=xh.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=true,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=zh(t.tracesSamplingRate),t.logNetworkAfterSampling=zh(t.networkRequestsSamplingRate),e}function zh(e){return Math.random()<=e}let Wh,Gh=1;function Jh(e){return Gh=2,Wh=Wh||function(e){return function(){const e=Dh.getInstance().document;return new Promise((t=>{if(e&&"complete"!==e.readyState){const n=()=>{"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}().then((()=>function(e){const t=e.getId();return t.then((e=>{Ph=e})),t}(e.installations))).then((t=>function(e,t){const n=function(){const e=Dh.getInstance().localStorage;if(!e)return;const t=e.getItem(kh);if(!(t&&(n=t,Number(n)>Date.now())))return;var n;const i=e.getItem(Eh);if(i)try{return JSON.parse(i)}catch(e){return}}();return n?(qh(n),Promise.resolve()):function(e,t){return function(e){const t=e.getToken();return t.then((e=>{})),t}(e.installations).then((n=>{const i=function(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.projectId;if(!n)throw Rh.create("no project id");return n}(e.app),r=function(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.apiKey;if(!n)throw Rh.create("no api key");return n}(e.app),s=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${i}/namespaces/fireperf:fetch?key=${r}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${n}`},body:JSON.stringify({app_instance_id:t,app_instance_id_token:n,app_id:Vh(e.app),app_version:bh,sdk_version:"0.0.1"})});return fetch(s).then((e=>{if(e.ok)return e.json();throw Rh.create("RC response not ok")}))})).catch((()=>{Ch.info(Kh)}))}(e,t).then(qh).then((e=>function(e){const t=Dh.getInstance().localStorage;e&&t&&(t.setItem(Eh,JSON.stringify(e)),t.setItem(kh,String(Date.now()+60*xh.getInstance().configTimeToLive*60*1e3)))}(e)),(()=>{}))}(e,t))).then((()=>Xh()),(()=>Xh()))}(e),Wh}function Xh(){Gh=3}const Yh=1e4;let Qh,Zh=3,el=[],tl=!1;function nl(e){setTimeout((()=>{if(0!==Zh)return el.length?void function(){const e=el.splice(0,1e3),t=e.map((e=>({source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)})));(function(e,t){return function(e){const t=xh.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then((e=>(e.ok||Ch.info("Call to Firebase backend failed."),e.json()))).then((e=>{const n=Number(e.nextRequestWaitMillis);let i=Yh;isNaN(n)||(i=Math.max(n,i));const r=e.logResponseDetails;Array.isArray(r)&&r.length>0&&"RETRY_REQUEST_LATER"===r[0].responseAction&&(el=[...t,...el],Ch.info("Retry transport request later.")),Zh=3,nl(i)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:xh.getInstance().logSource,log_event:t},e).catch((()=>{el=[...e,...el],Zh--,Ch.info(`Tries left: ${Zh}.`),nl(Yh)}))}():nl(Yh)}),e)}function il(e,t){Qh||(Qh=function(e){return(...t)=>{!function(e){if(!e.eventTime||!e.message)throw Rh.create("invalid cc log");el=[...el,e]}({message:e(...t),eventTime:Date.now()})}}(ol)),Qh(e,t)}function rl(e){const t=xh.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&Dh.getInstance().requiredApisAvailable()&&(e.isAuto&&Hh()!==Uh.VISIBLE||(3===Gh?sl(e):Jh(e.performanceController).then((()=>sl(e)),(()=>sl(e)))))}function sl(e){if(!Lh())return;const t=xh.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((()=>il(e,1)),0)}function ol(e,t){return 0===t?function(e){const t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:al(e.performanceController.app),network_request_metric:t};return JSON.stringify(n)}(e):function(e){const t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);const n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);const i={application_info:al(e.performanceController.app),trace_metric:t};return JSON.stringify(i)}(e)}function al(e){return{google_app_id:Vh(e),app_instance_id:Lh(),web_app_info:{sdk_version:bh,page_url:Dh.getInstance().getUrl(),service_worker_status:Bh(),visibility_state:Hh(),effective_connection_type:$h()},application_process_state:0}}const cl=["_fp",Ih,Th];class hl{constructor(e,t,n=!1,i){this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=Dh.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=i||`FB-PERF-TRACE-MEASURE-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw Rh.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw Rh.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),rl(this)}record(e,t,n){if(e<=0)throw Rh.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Rh.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(const e of Object.keys(n.metrics))isNaN(Number(n.metrics[e]))||(this.counters[e]=Number(Math.floor(n.metrics[e])));rl(this)}incrementMetric(e,t=1){void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(n=e,i=this.name,0===n.length||n.length>100||!(i&&i.startsWith(_h)&&cl.indexOf(n)>-1)&&n.startsWith("_"))throw Rh.create("invalid custom metric name",{customMetricName:e});var n,i;this.counters[e]=function(e){const t=Math.floor(e);return t<e&&Ch.info(`Metric value should be an Integer, setting the value as : ${t}.`),t}(t)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const n=!(0===(i=e).length||i.length>40||jh.some((e=>i.startsWith(e)))||!i.match(Fh));var i;const r=function(e){return 0!==e.length&&e.length<=100}(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw Rh.create("invalid attribute name",{attributeName:e});if(!r)throw Rh.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,n,i){const r=Dh.getInstance().getUrl();if(!r)return;const s=new hl(e,_h+r,!0),o=Math.floor(1e3*Dh.getInstance().getTimeOrigin());if(s.setStartTime(o),t&&t[0]&&(s.setDuration(Math.floor(1e3*t[0].duration)),s.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),s.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),s.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n){const e=n.find((e=>"first-paint"===e.name));e&&e.startTime&&s.putMetric("_fp",Math.floor(1e3*e.startTime));const t=n.find((e=>"first-contentful-paint"===e.name));t&&t.startTime&&s.putMetric(Ih,Math.floor(1e3*t.startTime)),i&&s.putMetric(Th,Math.floor(1e3*i))}rl(s)}static createUserTimingTrace(e,t){rl(new hl(e,t,!1,t))}}function ll(e,t){const n=t;if(!n||void 0===n.responseStart)return;const i=Dh.getInstance().getTimeOrigin(),r=Math.floor(1e3*(n.startTime+i)),s=n.responseStart?Math.floor(1e3*(n.responseStart-n.startTime)):void 0,o=Math.floor(1e3*(n.responseEnd-n.startTime));!function(e){const t=xh.getInstance();if(!t.instrumentationEnabled)return;const n=e.url,i=t.logEndPointUrl.split("?")[0],r=t.flTransportEndpointUrl.split("?")[0];n!==i&&n!==r&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((()=>il(e,0)),0)}({performanceController:e,url:n.name&&n.name.split("?")[0],responsePayloadBytes:n.transferSize,startTimeUs:r,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o})}function ul(e){Lh()&&(setTimeout((()=>function(e){const t=Dh.getInstance(),n=t.getEntriesByType("navigation"),i=t.getEntriesByType("paint");if(t.onFirstInputDelay){let r=setTimeout((()=>{hl.createOobTrace(e,n,i),r=void 0}),5e3);t.onFirstInputDelay((t=>{r&&(clearTimeout(r),hl.createOobTrace(e,n,i,t))}))}else hl.createOobTrace(e,n,i)}(e)),0),setTimeout((()=>function(e){const t=Dh.getInstance(),n=t.getEntriesByType("resource");for(const t of n)ll(e,t);t.setupObserver("resource",(t=>ll(e,t)))}(e)),0),setTimeout((()=>function(e){const t=Dh.getInstance(),n=t.getEntriesByType("measure");for(const t of n)dl(e,t);t.setupObserver("measure",(t=>dl(e,t)))}(e)),0))}function dl(e,t){const n=t.name;n.substring(0,wh.length)!==wh&&hl.createUserTimingTrace(e,n)}class pl{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),Dh.getInstance().requiredApisAvailable()?new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((e=>{e&&(tl||(nl(5500),tl=!0),Jh(this).then((()=>ul(this)),(()=>ul(this))),this.initialized=!0)})).catch((e=>{Ch.info(`Environment doesn't support IndexedDB: ${e}`)})):Ch.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){xh.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return xh.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){xh.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return xh.getInstance().dataCollectionEnabled}}ne(new x("performance",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==n.name)throw Rh.create("FB not default");if("undefined"==typeof window)throw Rh.create("no window");!function(e){Oh=e}(window);const r=new pl(n,i);return r._init(t),r}),"PUBLIC")),ae(vh,yh),ae(vh,yh,"esm2017");const fl={apiKey:"AIzaSyCmMbFwWZYubcfcopowOOLDwBMupXTqlOc",authDomain:"library-b7aba.firebaseapp.com",projectId:"library-b7aba",storageBucket:"library-b7aba.appspot.com",messagingSenderId:"275669996212",appId:"1:275669996212:web:41e1386247de6158017de1"};document.getElementById("messages"),document.getElementById("message-form"),document.getElementById("message"),document.getElementById("submit"),document.getElementById("submitImage"),document.getElementById("image-form"),document.getElementById("mediaCapture");let gl=document.getElementById("user-pic"),ml=document.getElementById("user-name"),vl=document.getElementById("sign-in"),yl=document.getElementById("sign-out");var bl;document.getElementById("must-signin-snackbar"),v(),document.getElementById("format").addEventListener("submit",(function(n){let c=function(){for(let e=0;e<o.length;e++)o[e].checked&&(p=o[e].value);return new t(i.value,r.value,s.value,p)}();var h;"edit"===n.target.children[5].children[0].className?(h=c,e.splice(f,1,h),a.classList.remove("edit"),a.textContent="Add Book"):function(t){e.push(t)}(c),y(),m(),n.preventDefault()})),document.getElementById("cancel").addEventListener("click",m),document.getElementById("newBook").addEventListener("click",g),function(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw re.create("bad-app-name",{appName:String(i)});const r=Z.get(i);if(r){if(C(e,r.options)&&C(n,r.config))return r;throw re.create("duplicate-app",{appName:i})}const s=new F(i);for(const e of ee.values())s.addComponent(e);const o=new se(e,n,s);Z.set(i,o)}(function(){if(fl&&fl.apiKey)return fl;throw new Error("No Firebase configuration object provided.\nAdd your web app's configuration object to firebase-config.js")}()),bl=function(e){if(e){console.log("sign-in");let e=Dn().currentUser.photoURL||"/images/profile_placeholder.png",n=Dn().currentUser.displayName;gl.style.backgroundImage="url("+((-1!==(t=e).indexOf("googleusercontent.com")&&-1===t.indexOf("?")?t+"?sz=150":t)+")"),ml.textContent=n,ml.removeAttribute("hidden"),gl.removeAttribute("hidden"),yl.removeAttribute("hidden"),vl.setAttribute("hidden","true")}else console.log("sign-out"),ml.setAttribute("hidden","true"),gl.setAttribute("hidden","true"),yl.setAttribute("hidden","true"),vl.removeAttribute("hidden");var t},M(Dn()).onAuthStateChanged(bl,undefined,undefined),yl.addEventListener("click",(function(){!function(e){M(e).signOut()}(Dn())})),vl.addEventListener("click",(async function(){var e=new It;await async function(e,t,n){const i=ht(e);!function(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&pe(e,"argument-error"),ge(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,bt);const r=Qt(i,void 0);return new on(i,"signInViaPopup",t,r).executeNotNull()}(Dn(),e)}))})()})();